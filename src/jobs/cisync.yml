description: >
  Merge .circleci/config.yml into the other branch.

executor: default

parameters:
  always:
    type: boolean
    default: false
    description: ""
  merge-from:
    type: string
    default: $CIRCLE_BRANCH
    description: "Branch name of the branch to merge from. If not specified, the environment variable CIRCLE_BRANCH will be used."
  merge-to:
    type: string
    default: "ALL"
    description: "Branch name to merge into. If not specified, all branches except merge-from will be used."
  user-name:
    type: string
    default: "cisync"
    description: "GitHub user.name to create the cisync commits."
  user-email:
    type: string
    default: "cisync@rhems-japan.co.jp"
    description: "GitHub user.email to create the cisync commits."
  fingerprint:
    type: string
    description: "Fingerprint of SSH keys that have write permission to the repository. It is recommended to use deploy key. See https://circleci.com/docs/2.0/gh-bb-integration/#creating-a-github-deploy-key."

steps:
  - checkout
  - cisync:
      always: << parameters.always >>
      merge-from: << parameters.merge-from >>
      merge-to: << parameters.merge-to >>
      user-name: << parameters.user-name >>
      user-email: << parameters.user-email >>
      fingerprint: << parameters.fingerprint >>
